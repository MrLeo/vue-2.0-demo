webpackJsonp([1,3],{19:function(e,a,n){e.exports={"default":n(20),__esModule:!0}},20:function(e,a,n){var t=n(1),r=t.JSON||(t.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}},57:function(e,a,n){"use strict";function t(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a["default"]=e,a}function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var o=n(32),i=r(o),s=n(19),p=r(s),c=n(5),d=r(c),A=n(6),l=n(4),m=t(l);a["default"]={name:"map",data:function(){return{map:null,markers:[],markderLevel:1}},computed:(0,d["default"])({},(0,A.mapState)({indexSearch:function(e){return e.base.indexSearch}}),(0,A.mapGetters)({baseInfo:"baseInfo"})),watch:{indexSearch:{deep:!0,handler:function(e,a){var n=this;console.log("[Leo]indexSearch has be change => ",(0,p["default"])(e)),n.setSecondLevelMarker().then(function(e){})}}},methods:(0,d["default"])({},(0,A.mapActions)(["setRoadList","setMapList"]),{init:function(){var e=this;e.map=new AMap.Map("map",{center:[116.398075,39.908149],zoom:8}),e.map.plugin(["AMap.ToolBar"],function(){e.map.addControl(new AMap.ToolBar)});var a=e.setRoadList();a.then(function(a){e.markers&&e.map.remove(e.markers)||e.map.clearMap(),e.markers=[],e.$store.state.base.roadList.filter(function(a){if(a.zuobiao&&a.zuobiao.length>1){var n=e.createMarker({position:a.zuobiao.split(","),info:"<p>"+a.t_name+"</p><p>"+a.count+"</p>"},"map-marker");n.data.id=a.id,n.data.dqzuobiao=a.zuobiao,e.markers.push(n),AMap.event.addListener(n,"click",function(a){e.$store.commit(m.SET_INDEX_SEARCH_INFO,{quyu:a.target.data.id}),e.setSecondLevelMarker().then(function(a){e.map.setFitView(e.markers)})})}})});var n=function(a){if(console.log("[Leo]缩放级别 => ",e.map.getZoom()),e.map.getZoom()>=13){console.log("[Leo]缩放级别大于13 => 中心点坐标 => ",(0,p["default"])(e.map.getCenter()));var n=e.map.getCenter();e.$store.commit(m.SET_INDEX_SEARCH_INFO,{dqzuobiao:[n.lat,n.lng].join(",")}),e.setSecondLevelMarker().then(function(e){})}};AMap.event.addListener(e.map,"zoomend",n)},createMarker:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"map-marker",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],t=this,r=document.createElement("div");r.className=a,r.innerHTML=e.info||"<img src='http://webapi.amap.com/theme/v1.3/markers/n/mark_r.png'>";var o=new AMap.Marker({content:r,position:e.position||[116.398075,39.908149]});return o.subMarkers=[],o.data={},n||o.setMap(t.map),o},setSecondLevelMarker:function(){var e=this;return e.markers&&e.map.remove(e.markers)||e.map.clearMap(),e.markers=[],e.setMapList().then(function(a){var n=!0,t=!1,r=void 0;try{for(var o,s=(0,i["default"])(a);!(n=(o=s.next()).done);n=!0){var p=o.value;if(p.zuobiao&&p.zuobiao.length>1){var c=e.createMarker({position:p.zuobiao.split(","),info:"<p>"+p.p_name+"</p><p>"+p.jiage+"</p>"},"map-marker__2");c.data.id=p.id,c.data.zuobian=p.zuobiao,c.data.tel=p.tel,c.data.jiage=p.jiage,e.markers.push(c),AMap.event.addListener(c,"click",e.clicksecondLevelMarker)}}}catch(d){t=!0,r=d}finally{try{!n&&s["return"]&&s["return"]()}finally{if(t)throw r}}return a})},clicksecondLevelMarker:function(e){var a=e.target.data;console.log("[Leo]点击二级覆盖物 => 进入详情页 => ",a),window.location.href="h5/view/product_info.php?id="+a.id+"&zuobian="+a.zuobian+"&tel="+a.tel+"&jiage="+a.jiage}}),created:function(){},mounted:function(){var e=this;e.$nextTick(function(){e.init()})}}},113:function(e,a,n){a=e.exports=n(30)(),a.push([e.id,"#map{width:100%;height:100%}.map-marker,.map-marker__2{width:50px;height:50px;border:1px solid #fff;background-color:red;text-align:center;color:#fff;font-family:Microsoft YaHei UI,\\\\5FAE\\8F6F\\96C5\\9ED1,Verdana,sans-serif;overflow:hidden;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;-ms-flex-direction:column;flex-direction:column}.map-marker{border-radius:50%}.map-marker__2{border-radius:10px;width:auto;white-space:nowrap;line-height:20px;height:40px;padding:0 5px}.amap-marker{transform:rotate(0deg) translate(-50%,-50%)!important}","",{version:3,sources:["/./src/views/map.vue"],names:[],mappings:"AACA,KACI,WAAY,AACZ,WAAa,CAChB,AACD,2BAEI,WAAY,AACZ,YAAa,AACb,sBAAuB,AACvB,qBAAsB,AACtB,kBAAmB,AACnB,WAAY,AACZ,wEAA+D,AAC/D,gBAAiB,AACjB,oBAAqB,AACrB,aAAc,AACd,qBAAsB,AAClB,uBAAwB,AAC5B,sBAAuB,AACnB,mBAAoB,AACxB,0BAA2B,AACvB,qBAAuB,CAC9B,AACD,YACI,iBAAmB,CACtB,AACD,eACI,mBAAoB,AACpB,WAAY,AACZ,mBAAoB,AACpB,iBAAkB,AAClB,YAAa,AACb,aAAe,CAClB,AACD,aACI,qDAAyD,CAC5D",file:"map.vue",sourcesContent:['\n#map {\n    width: 100%;\n    height: 100%;\n}\n.map-marker,\n.map-marker__2 {\n    width: 50px;\n    height: 50px;\n    border: 1px solid #fff;\n    background-color: red;\n    text-align: center;\n    color: #fff;\n    font-family: "Microsoft YaHei UI", "微软雅黑", Verdana, sans-serif;\n    overflow: hidden;\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-pack: center;\n        justify-content: center;\n    -ms-flex-align: center;\n        align-items: center;\n    -ms-flex-direction: column;\n        flex-direction: column;\n}\n.map-marker {\n    border-radius: 50%;\n}\n.map-marker__2 {\n    border-radius: 10px;\n    width: auto;\n    white-space: nowrap;\n    line-height: 20px;\n    height: 40px;\n    padding: 0 5px;\n}\n.amap-marker {\n    transform: rotate(0deg) translate(-50%, -50%) !important;\n}\n'],sourceRoot:"webpack://"}])},121:function(e,a,n){var t=n(113);"string"==typeof t&&(t=[[e.id,t,""]]);n(31)(t,{});t.locals&&(e.exports=t.locals)},133:function(e,a,n){var t,r;n(121),t=n(57);var o=n(141);r=t=t||{},"object"!=typeof t["default"]&&"function"!=typeof t["default"]||(r=t=t["default"]),"function"==typeof r&&(r=r.options),r.render=o.render,r.staticRenderFns=o.staticRenderFns,e.exports=t},141:function(module,exports){module.exports={render:function(){with(this)return _m(0)},staticRenderFns:[function(){with(this)return _h("div",{attrs:{id:"map"}})}]}}});
//# sourceMappingURL=1.b5b813d2d7150486884d.js.map